<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>深海拾贝</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="深海拾贝">
<meta property="og:url" content="http://blog.lifejs.com/">
<meta property="og:site_name" content="深海拾贝">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="深海拾贝">
<meta name="twitter:description">

  
    <link rel="alternative" href="/atom.xml" title="深海拾贝" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  

  <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<div class="profilepic">
			<img src="https://avatars2.githubusercontent.com/u/760383?v=3&amp;s=460">
		</div>

		<hgroup>
		  <h1 class="header-author"><a href="/">everdom</a></h1>
		</hgroup>

		
		<p class="header-subtitle">智慧与思想碰撞，科学与艺术汇合。</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/everdom/" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/everdom" title="weibo">weibo</a>
					        
								<a class="google" target="_blank" href="https://plus.google.com/u/0/102093507923007900383/posts/p/pub" title="google">google</a>
					        
								<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud">
						<a href="/tags/DSP/" style="font-size: 10.00px;">DSP</a><a href="/tags/c-c/" style="font-size: 10.00px;">c/c++</a><a href="/tags/chrome/" style="font-size: 13.33px;">chrome</a><a href="/tags/cubieboard/" style="font-size: 16.67px;">cubieboard</a><a href="/tags/goagent/" style="font-size: 10.00px;">goagent</a><a href="/tags/gtk/" style="font-size: 13.33px;">gtk</a><a href="/tags/indicator/" style="font-size: 10.00px;">indicator</a><a href="/tags/linux/" style="font-size: 13.33px;">linux</a><a href="/tags/node/" style="font-size: 10.00px;">node</a><a href="/tags/putty/" style="font-size: 10.00px;">putty</a><a href="/tags/ruby/" style="font-size: 10.00px;">ruby</a><a href="/tags/webkit/" style="font-size: 10.00px;">webkit</a><a href="/tags/乱码/" style="font-size: 10.00px;">乱码</a><a href="/tags/多系统/" style="font-size: 10.00px;">多系统</a><a href="/tags/编码/" style="font-size: 10.00px;">编码</a><a href="/tags/设计模式/" style="font-size: 20.00px;">设计模式</a><a href="/tags/软件设计/" style="font-size: 10.00px;">软件设计</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					技术爱好者或是一个极客，致力于web开发，曾做过嵌入式开发，喜欢鼓捣移动开发和设计，崇尚简洁高效，完美主义。
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay"></div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="https://avatars2.githubusercontent.com/u/760383?v=3&amp;s=460">
			</div>

			<hgroup>
			  <h1 class="header-author"><a href="/">everdom</a></h1>
			</hgroup>
			
			<p class="header-subtitle">智慧与思想碰撞，科学与艺术汇合。</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/everdom/" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/everdom" title="weibo">weibo</a>
			        
						<a class="google" target="_blank" href="https://plus.google.com/u/0/102093507923007900383/posts/p/pub" title="google">google</a>
			        
						<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      
  
    <article id="post-publish-my-chrome-applications" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/10/22/publish-my-chrome-applications/" class="article-date">
  	<time datetime="2014-10-21T16:15:59.000Z" itemprop="datePublished">Oct 22 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/分享/">分享</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/chrome/">chrome</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/10/22/publish-my-chrome-applications/">发布两个我做的chrome应用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这一段时间由于工作环境换成了linux，饱受了各种折腾的阵痛之后，哥决定下手实现一些急切的需求，最迫切的就属印象笔记和qq了，这两个常用的东西都没有linux版的客户端，不过两者都有网页版的，但网页版的终归纠结于要先打开浏览器，而且也不能做一些定制，于是乎，哥瞄准了chrome的packaged app这个狂野酷拽吊炸天的东西和chrome本身的跨平台特性，搞了两个chrome应用终于几本解决了燃眉之急～鼓掌～～撒花儿～～！</p>
<p>首先是印象笔记啦，先放上安装地址：<br><a href="https://chrome.google.com/webstore/detail/%E5%8D%B0%E8%B1%A1%E7%AC%94%E8%AE%B0/lgeofkgcdepmadnmoendmocgolpbkfmp?utm_source=chrome-ntp-launcher" target="_blank" rel="external">https://chrome.google.com/webstore/detail/%E5%8D%B0%E8%B1%A1%E7%AC%94%E8%AE%B0/lgeofkgcdepmadnmoendmocgolpbkfmp?utm_source=chrome-ntp-launcher</a></p>
<p>话说印象笔记后来升级了一下，界面更小清新了，好喜欢的赶脚哦～<br><a href="https://raw.github.com/everdom/ChromeEvernote/master/images/evernote preview3.png" target="_blank" rel="external"><img src="https://raw.github.com/everdom/ChromeEvernote/master/images/evernote preview3.png" alt="evernote preview3.png"></a></p>
<p>话说短短两个月就有1200+用户了，哥是不是可以嘚瑟一下呢？嘻嘻～<br>然后是ChromeQQ，今天首发，很激动有木有！配上elementary os的界面效果真的好美有木有！<br><a href="https://raw.github.com/everdom/ChromeQQ/master/images/screenshot2.png" target="_blank" rel="external"><img src="https://raw.github.com/everdom/ChromeQQ/master/images/screenshot2.png" alt="screenshot2"></a></p>
<p><a href="https://raw.github.com/everdom/ChromeQQ/master/images/screenshot4.png" target="_blank" rel="external"><img src="https://raw.github.com/everdom/ChromeQQ/master/images/screenshot4.png" alt="screenshot4"></a></p>
<p>忍不住的话就安装一下吧：<br><a href="https://chrome.google.com/webstore/detail/chromeqq/pjkebmlmkppdjcdcilfcjdkifljollfd?gl=CN&amp;utm_source=chrome-ntp-icon" target="_blank" rel="external">https://chrome.google.com/webstore/detail/chromeqq/pjkebmlmkppdjcdcilfcjdkifljollfd?gl=CN&amp;utm_source=chrome-ntp-icon</a></p>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-node-webkit-study" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/08/09/node-webkit-study/" class="article-date">
  	<time datetime="2014-08-09T07:24:40.000Z" itemprop="datePublished">Aug 9 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/未分类/">未分类</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node/">node</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webkit/">webkit</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/08/09/node-webkit-study/">Node-Webkit研究</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="收集入门文档，找到入门步骤">收集入门文档，找到入门步骤</h2>
<p><a href="http://damoqiongqiu.iteye.com/blog/2010720" target="_blank" rel="external">http://damoqiongqiu.iteye.com/blog/2010720</a></p>
<p>下载对应node-webkit版本：<a href="https://github.com/rogerwang/node-webkit" target="_blank" rel="external">https://github.com/rogerwang/node-webkit</a></p>
<p>Create index.html:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="title">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">h1</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="title">h1</span>&gt;</span></div><div class="line">    We are using node.js <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"><span class="built_in">document</span>.write(process.version)</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>.</div><div class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></div></pre></td></tr></table></figure>

<p>Create package.json:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">{</div><div class="line">    "<span class="attribute">name</span>": <span class="value"><span class="string">"nw-demo"</span></span>,</div><div class="line">    "<span class="attribute">main</span>": <span class="value"><span class="string">"index.html"</span></span></div><div class="line">}</div></pre></td></tr></table></figure>

<p>Run:<br>$ /path/to/nw . (suppose the current directory contains ‘package.json’)</p>
<p>Note: on Windows, you can drag the folder containing package.json to nw.exe to open it.</p>
<h2 id="研究官方文档，了解具体架构">研究官方文档，了解具体架构</h2>
<p><a href="https://github.com/rogerwang/node-webkit" target="_blank" rel="external">https://github.com/rogerwang/node-webkit</a></p>
<h3 id="运行应用">运行应用</h3>
<p>直接在命令行参数中加上文件夹路径<br>把文件夹打成zip包改后缀名为nw再运行</p>
<h2 id="下载代码，开发实例">下载代码，开发实例</h2>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-ruby-encoding-problem" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/11/15/ruby-encoding-problem/" class="article-date">
  	<time datetime="2013-11-15T09:18:00.000Z" itemprop="datePublished">Nov 15 2013</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/学习笔记/">学习笔记</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ruby/">ruby</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/编码/">编码</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/11/15/ruby-encoding-problem/">Ruby编码问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Ruby 1.93对中文似乎不大友好，特别是碰到中文路径，如果碰到incompatible encoding regexp match (GBK regexp with UTF-8 string)的错误，可能是由于中文路径的问题，因为rb源文件是utf-8的，而一旦涉及中文路径，实际上导入的是GBK的编码，所以可能报错，解决方法有<br>1、 rb源文件头部加上#encoding utf-8，然后在对应地方采用Encoding.default_external =’gbk’Encoding.default_internal =’utf-8’的方法将外部路径名转换成utf-8的编码<br>2、 采用encode(‘utf-8’)来对相应变量进行转码，如果用force_encoding的话转的码会是utf8编码的十六进制表示</p>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-goagent-installation-on-osx-and-cubieboard" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/11/02/goagent-installation-on-osx-and-cubieboard/" class="article-date">
  	<time datetime="2013-11-02T09:16:00.000Z" itemprop="datePublished">Nov 2 2013</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/学习笔记/">学习笔记</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/goagent/">goagent</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/11/02/goagent-installation-on-osx-and-cubieboard/">goagent+的OSX安装和Cubieboard安装</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>OSX安装：</p>
<p>1.修改python文件夹权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> chmod <span class="number">777</span> /Library/Python/<span class="number">2.7</span>/site-packages/</div></pre></td></tr></table></figure>

<ol>
<li>安装brew：在终端执行</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ruby <span class="operator">-e</span> “$(curl -fsSkL raw.github.com/mxcl/homebrew/go)”  –请注意都是半角英文双引号</div></pre></td></tr></table></figure>

<ol>
<li>安装libevent：在终端执行</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install libevent</div></pre></td></tr></table></figure>

<p>（Homebrew 缓存路径：/Library/Cache/Homebrew/下，如果下不下来，就手动下载并把压缩包放到这里即可)</p>
<ol>
<li>安装pip：在终端执行</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">easy_install pip</div></pre></td></tr></table></figure>

<ol>
<li>安装cython：在终端执行</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install cython</div></pre></td></tr></table></figure>

<ol>
<li>安装dnslib: 在终端执行</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install dnslib</div></pre></td></tr></table></figure>

<ol>
<li>安装greenlet：在终端执行</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> pip install greenlet</div></pre></td></tr></table></figure>

<p>(以上命令如果运行不了就要切换到root再试，sudo su)</p>
<ol>
<li>安装gevent</li>
</ol>
<p>下载goagent所需的gevent-1.0的OSX版本：<a href="https://code.google.com/p/goagent/downloads/list" target="_blank" rel="external">https://code.google.com/p/goagent/downloads/list</a> 下载<a href="https://code.google.com/p/goagent/downloads/detail?name=gevent-1.0dev-macosx-intel.egg&amp;can=2&amp;q=" target="_blank" rel="external">gevent-1.0dev-macosx-intel.egg</a>，然后用easy_install 安装：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="title">easy_install</span> ~/gevent-<span class="number">1</span>.0dev-macosx-intel.egg</div></pre></td></tr></table></figure>

<p>即可,如果下载源码编译，方法是：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl -O [<span class="link_label">http://gevent.googlecode.com/files/gevent-1.0b4.tar.gz</span>](<span class="link_url">http://gevent.googlecode.com/files/gevent-1.0b4.tar.gz</span>) && tar xvzpf gevent-1.0b4.tar.gz && cd gevent-1.0b4 && python [<span class="link_label">setup.py</span>](<span class="link_url">http://setup.py/</span>) install</div></pre></td></tr></table></figure>

<p>但编译不过，提示：clang: error: unsupported option ‘-static-libgcc’，估计是Xcode没用gcc，用clang的缘故</p>
<ol>
<li>安装<a href="https://code.google.com/p/goagent/downloads/detail?name=GoAgentMac.dmg&amp;can=2&amp;q=" target="_blank" rel="external">GoAgentMac.dmg</a>然后修改GoAgentMac包下的/Contents/Info.plist将GoAgentPath改为GoAgent+的proxy.py的完整路径即可</li>
</ol>
<p>附：<br>python包的通用安装方法：<a href="http://jiayanjujyj.iteye.com/blog/1409819" target="_blank" rel="external">Python的包管理工具 - - ITeye技术网站</a></p>
<p>Cubieboard/Ubuntu安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> apt-get install python-dev libevent python-pip curl</div><div class="line"><span class="built_in">sudo</span> apt-get install build-essential gcc</div><div class="line">pip install dnslib</div><div class="line">curl -O [http://gevent.googlecode.com/files/gevent-<span class="number">1.0</span>b4.tar.gz](http://gevent.googlecode.com/files/gevent-<span class="number">1.0</span>b4.tar.gz) && tar xvzpf gevent-<span class="number">1.0</span>b4.tar.gz && <span class="built_in">cd</span> gevent-<span class="number">1.0</span>b4 && python [setup.py](http://setup.py/) install</div></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-putty-garbled-solution" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/10/29/putty-garbled-solution/" class="article-date">
  	<time datetime="2013-10-29T09:15:00.000Z" itemprop="datePublished">Oct 29 2013</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/学习笔记/">学习笔记</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/putty/">putty</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/乱码/">乱码</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/10/29/putty-garbled-solution/">Putty乱码解决</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>打开putty主程序，选择window-〉Appearance-〉Font settings-〉Change…,选择Fixedsys字体,字符集选择CHINESE_GB2312。</p>
<p>在window-〉Appearance -〉Translation中，修改Received data assumed to be in which character set 中和Linux中的字符集,把Use font encoding改为UTF-8。</p>
<p>如果经常使用,把这些设置保存在session里面. 现在打开putty,登录成功后,在shell中输入:export LC_ALL=’zh_CN.utf8’ ，中文显示就正常了 。</p>
<p>nano /etc/profile<br>加入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> LC_ALL=<span class="string">'zh_CN.utf8‘</span></div></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-dsplink-problems" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/10/29/dsplink-problems/" class="article-date">
  	<time datetime="2013-10-29T09:13:00.000Z" itemprop="datePublished">Oct 29 2013</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/开发笔记/">开发笔记</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DSP/">DSP</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/10/29/dsplink-problems/">DspLink问题记录</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>编译TI的Dsp库的话，需要在dsplink下加入如下bat脚本，来进行编译环境设置</p>
<figure class="highlight bat"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">echo</span> off</div><div class="line"><span class="keyword">set</span> BASE_PERL = C:\Perl</div><div class="line"><span class="keyword">set</span> TI_TOOLS_BASE_DIR = D:\CCStudio_v3.<span class="number">3</span></div><div class="line"><span class="keyword">set</span> BIOS_INSTALL_DIR = <span class="envvar">%TI_TOOLS_BASE_DIR%</span>\bios_5_33_06</div><div class="line"><span class="keyword">set</span> XDC_INSTALL_DIR = <span class="envvar">%BIOS_INSTALL_DIR%</span>\xdctools</div><div class="line"><span class="keyword">set</span> CODEGEN_INSTALL_DIR = <span class="envvar">%TI_TOOLS_BASE_DIR%</span>\C6000\cgtools</div><div class="line"><span class="keyword">set</span> PATH = <span class="envvar">%XDC_INSTALL_DIR%</span>;<span class="envvar">%CODEGEN_INSTALL_DIR%</span>\bin;<span class="envvar">%PATH%</span></div><div class="line"></div><div class="line"><span class="keyword">cd</span> etc\host\scripts\msdos</div><div class="line"><span class="flow">call</span> dsplinkenv.bat</div><div class="line"><span class="flow">call</span> dsplinkcfg.bat --platform=OMAP3530 --nodsp=<span class="number">1</span> --dspcfg_0=OMAP3530SHMEM  -dspos_0=DSPBIOS5XX --gppos=WINCE --comps=ponslrmc --DspTskMode=<span class="number">1</span></div><div class="line"><span class="keyword">cd</span> ..\..\..\</div><div class="line">cmd</div></pre></td></tr></table></figure>

<p>然后就可以编译dsplink库了：<br>在dsplink目录下：</p>
<figure class="highlight bat"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">cd</span> dsp\src</div><div class="line">gmake [-s] all VERBOSE=<span class="number">1</span></div></pre></td></tr></table></figure>

<p>加VERBOSE=1可以看到调试输出<br>dsplink1.64版编译会失败，因为有个makefile有点问题，错误的加上了引号：<br>dsplink\make\DspBios\c64xxp_5.xx_windows.mk文件中去掉BASE_INSTALL，BASE_SABIOS，XDCTOOLS_DIR，BASE_CGTOOLS等号右边的路径的引号。<br>编译dsplink基本通信库之后就可以编译dsp端的例子程序了（gpp端无法编译，需要使用编译好的dsplinkapi.lib库）<br>在dsplink目录下：</p>
<figure class="highlight bat"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">cd</span> dsp\src\samples\</div><div class="line">gmake all</div></pre></td></tr></table></figure>

<p>注意：这里的gmake是位于XDC_INSTALL_DIR下的gmake工具，是CCStudio带的，用GNU的make是不行的。另外，编译例子程序是依赖于基本库的</p>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-windows-high-precision-functions" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/10/20/windows-high-precision-functions/" class="article-date">
  	<time datetime="2013-10-20T09:12:00.000Z" itemprop="datePublished">Oct 20 2013</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/学习笔记/">学习笔记</a>
  </div>

      
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/10/20/windows-high-precision-functions/">Windows高精度时间函数</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这个计时函数主要是通过tick数和tick频率来进行时间测量的。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">LARGE_INTEGER secfreq;</div><div class="line">QueryPerformanceFrequency(&secfreq); <span class="comment">//获取每秒的tick，即tick频率</span></div><div class="line"><span class="keyword">double</span> msfreq;</div><div class="line">msfreq = secfreq.QuadPart / <span class="number">1000.0</span>; <span class="comment">//每毫秒的tick数</span></div><div class="line">LARGE_INTEGER lastTick;</div><div class="line">QueryPerformanceCounter(&lastTick); <span class="comment">//获得最后一次tick计数</span></div><div class="line"></div><div class="line"><span class="comment">// do something...</span></div><div class="line"></div><div class="line">LARGE_INTEGER curTick;</div><div class="line">QueryPerformanceCounter(&curTick); <span class="comment">//获得最后一次tick计数</span></div><div class="line"><span class="built_in">printf</span>(<span class="string">"%lf ms"</span>, (curTick.QuadPart-lastTick.QuadPart) / msfreq);</div></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-gtk-radio-development-problem" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/10/19/gtk-radio-development-problem/" class="article-date">
  	<time datetime="2013-10-18T16:36:00.000Z" itemprop="datePublished">Oct 19 2013</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/开发笔记/">开发笔记</a>
  </div>

      
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/10/19/gtk-radio-development-problem/">GTK电台开发问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>ubuntu 13.04，webkit里面显示的都是宋体，而且启动程序时xterm里面显示Fontconfig warning: “/etc/fonts/conf.d/50-user.conf”, line 9: reading configurations from ~/.fonts.conf is deprecated.的错误，解决方法</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mkdir ~/.config/fontconfig</div><div class="line">mv ~/.fonts.conf ~/.config/fontconfig/</div></pre></td></tr></table></figure>

<p><strong>Failed to load module “overlay-scrollbar”问题</strong><br>是由于overlay-scrollbar引起的，可以通过卸载overlay-scrollbar解决，不过对程序不影响<br>GTK窗口的显示问题：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">gtk_window_present (GTK_WINDOW(appViewHandle));</div><div class="line">gtk_widget_show_all(appViewHandle);</div></pre></td></tr></table></figure>

<p>两个必须连用，否则可能出现窗口不能在最上层显示的问题，有可能是最小化后不能恢复显示，有可能是窗口被其他窗口覆盖不能在顶端显示<br>另外，gtk_widget_present不要与以下函数一起用，如果一起用，也会出现上述问题</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">gtk_window_deiconify (GTK_WINDOW(appViewHandle));</div><div class="line">gtk_widget_activate(appViewHandle);</div></pre></td></tr></table></figure>

<p><strong>至于flash的问题，先下载nspluginwrapper，还有32位的库，即：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> apt-get install nspluginwrapper</div><div class="line"><span class="built_in">sudo</span> apt-get install ia32-libs ia32-libs-gtk linux32 lib32asound2</div></pre></td></tr></table></figure>

<p>然后把32位的libflashplayer.so移到~/.mozilla/plugins/libflashplayer.so<br>然后运行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nspluginwrapper -i ~/.mozilla/plugins/libflashplayer.so</div></pre></td></tr></table></figure>

<p><strong>autogen时出错：HAVE_INTROSPECTION does not appear in AM_CONDITIONAL解决方法：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> apt-get install gobject-introspection</div></pre></td></tr></table></figure>

<p><strong>gtkdocize: not found错误，解决方法：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> apt-get install gtk-doc-tools</div></pre></td></tr></table></figure>

<p><strong>configure.ac checks: GOBJECT_INTROSPECTION_CHECK错误，解决方法：</strong><br>重新构建工程即可</p>
<p>this macro does not exist if GObject Introspection is not installed.<br>in ubuntu 10.04, can install gobject-introspection (0.9.3-0ubuntu4),<br>if also failed, use autogen.sh to regenerate.</p>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-some-basic-problems-easy-to-ignore" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/10/18/some-basic-problems-easy-to-ignore/" class="article-date">
  	<time datetime="2013-10-18T09:21:00.000Z" itemprop="datePublished">Oct 18 2013</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/学习笔记/">学习笔记</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c-c/">c/c++</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/10/18/some-basic-problems-easy-to-ignore/">容易忽略的基础问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天遇到一个很基础的问题，如果一个函数要传出一个结构体，用值形式的返回值传出，与用引用加赋值的形式传出，与用指针然后memcpy的形式拷贝传出，与用引用形式的返回值，与用指针形式的返回值传出，与用指针不memcpy的形式传出传出的区别。得出以下结论：</p>
<ol>
<li>用值形式的返回值传出会在栈中留有一份结构体的拷贝。</li>
<li>用引用和赋值的形式传出和用指针然后memcpy的形式拷贝传出基本等价，但用指针和memcpy的形式的话，需要知道外界的缓冲区大小，而引用由于有类型，所以事先已经知道了外界缓冲区的大小，不会发生缓冲区溢出等问题。</li>
<li>用引用或指针形式的返回值传出会暴露对象内部的内容，破坏了封装性</li>
<li>所以设计接口的时候，对于基本类型，尽量通过返回值的形式传出，而对于结构体，尽量用引用的形式传出，对于OOP，除非有特殊需要，都要保证以值的形式传出。</li>
</ol>
<p>又一个基础问题，即memset的使用，memset第二个参数为int型的，只能给字符型的数据赋值，也就0-255。所以不要期望通过memset给一个float型的数组幅值，否则将得不到期望的结果。而且就算是给一个int型幅值，也只能赋0-255之间的值。</p>
<p>对于程序调试，当逻辑上找不到错误时，很有可能是类型上出现了错误。比如一个这样的循环：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">INT8 i=<span class="number">0</span>;</div><div class="line"><span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;<span class="number">256</span>; i++)</div><div class="line">{</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"hello world"</span>);</div><div class="line">}</div></pre></td></tr></table></figure>

<p>这会导致什么呢？一个死循环！！！<br>c语言函数中所有的定义必须在函数开头！<br>在函数外部只能定义变量是不能运行代码的！</p>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
    <article id="post-linux-status-menu-development" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/10/09/linux-status-menu-development/" class="article-date">
  	<time datetime="2013-10-09T09:22:00.000Z" itemprop="datePublished">Oct 9 2013</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/开发笔记/">开发笔记</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/indicator/">indicator</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/10/09/linux-status-menu-development/">linux托盘菜单（或indicator）开发</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在Gnome2时代，托盘菜单广泛采用GtkStatusIcon，但在gnome3时代好像也可以，但ubuntu13.04之后unity不支持GtkStatusIcon了（ubuntu12可以通过白名单的形式解除这一限制），所以在ubuntu13.04的unity下使用GtkStatusIcon会没有任何显示，所以得用libappindicator来显示托盘菜单，实际上ubuntu并没有去除托盘菜单这个东西，只不过把托盘菜单改了个名为indicator applet，规范了些，不过差不多，加了点限制而已，使用还是挺方便的。</p>
<p>之后研究了些高级菜单，就是说菜单项里面包含一些其他控件，比如一个播放器想要托盘菜单控制音量，如果只是简单的菜单，可想而知控制音量多么不方便，显然应该在菜单中加个滑块嘛。所以这个需求咋整呢，把ubuntu的系统indicator的源码down下来研究了一下，找到一种继承GtkMenuItem的自定义控件类的方法，即做一个GtkMenuItem的子类，不过这个子类里面包含了一些其他控件，如滑块啊，切换按钮啊，日历啊什么的。这些自定义控件在一个libido库里面（真爽，不用自己费心了）。这样按说使用这个自定义MenuItem来替换之前的MenuItem就能达到高级控件的效果了，而且还可以捕获事件信号，但libappindicator这个库真TMD让人无语，替换自定义的MenuItem之后，托盘菜单上所有原始的MenuItem都能正常显示，而自定义的MenuItem貌似只能显示出原始MenuItem的元素，控件那些都不见了，妹的。可是如果不用libappindicator，用原生的GtkMenuBar来显示菜单，却是可以的。真是奇葩啊。而且在xfce和kde，gnome3环境下貌似也是可以的？（需要再次验证一下），为啥呢？</p>
<p>没办法，对于这种奇葩的问题，目前有点免疫力，另辟蹊径了罢。不用libappindicator罢，于是找到了libinidcator和dbus-menu这两个高端货，libindicator文档缺乏，研究麻烦，转战到dbus-menu，找到一些文章，dbus是linux下的一个进程间通信的东东，很强大，可以实现gtk，qt进程间通信。dbus-menu自然就能共享菜单了。不过呢，今天down了一个indicator-applet的代码，又被我发现了一个最TMD简单的解决方案（需要验证一下），就是呢，GtkMenuItem是GtkContainter的子类！我擦！直接gtk_container_add完事！亏我搞了这么久真是没想到啊。不过对于dbus-menu确实也可以研究一下，多进程共享菜单还是挺诱人的嘛，君不见ubuntu的那个很爽的音量indicator吗？可以集成多个播放器哦亲！</p>
<p>说到dbus，还有高级货，mpris和osd-lyrics！mpris是一个播放器控制接口，如果要集成自己的播放器到音量indicator中，就得实现这个，更重要的是，实现这个之后还能通过osd-lyrics来显示歌词哦亲啊，我的亲啊，这尼玛又免去了一大堆代码啊，有木有，开源的世界就是协作啊，各种拼接啊。哈哈。所以，对播放器来说，必须得搞定mpris这货，加油！</p>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>






  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  

      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2014 everdom
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>

  <script src="/js/main.js" type="text/javascript"></script>


  </div>
</body>
</html>